<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enchanted Task Garden</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        :root {
            --primary-color: #4CAF50;
            --secondary-color: #FF69B4;
            --background-color: #f0f8ff;
            --text-color: #333;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="%234CAF50" opacity="0.1"/></svg>');
            background-size: 20px 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
        }

        h1 {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 2.5em;
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        #streak {
            text-align: center;
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
            background-color: rgba(255,255,255,0.8);
            padding: 0.5rem;
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        #task-form {
            display: flex;
            margin-bottom: 1rem;
        }

        #task-input {
            flex-grow: 1;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 20px 0 0 20px;
            outline: none;
            transition: all 0.3s;
        }

        #task-input:focus {
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
        }

        button {
            padding: 0.75rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        button:active {
            transform: translateY(0);
        }

        #task-list, #past-tasks {
            margin-bottom: 2rem;
        }

        .task {
            background-color: white;
            margin-bottom: 0.75rem;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: fadeIn 0.5s;
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        .task:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }

        .task.completed span {
            text-decoration: line-through;
            color: #888;
        }

        .task.completed::before {
            content: 'ðŸŒ¸';
            margin-right: 10px;
            font-size: 1.2em;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #garden {
            height: 400px;
            background-color: rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="20" y="80" fill="%238B4513"/></svg>');
            background-size: 50px 50px;
            background-position: bottom;
            background-repeat: repeat-x;
        }

        .flower {
            position: absolute;
            bottom: 20px;
            width: 40px;
            height: 40px;
            transition: all 0.5s;
            animation: grow 0.5s, sway 3s infinite alternate;
        }

        .flower::before {
            content: 'ðŸŒ»';
            font-size: 40px;
        }

        @keyframes grow {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }

        @keyframes sway {
            from { transform: rotate(-5deg); }
            to { transform: rotate(5deg); }
        }

        #date-selector {
            margin-bottom: 1rem;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            outline: none;
            transition: all 0.3s;
        }

        #date-selector:focus {
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.3);
        }

        .tab-buttons {
            display: flex;
            justify-content: center;
            margin-bottom: 1rem;
        }

        .tab-button {
            margin: 0 0.5rem;
            padding: 0.75rem 1.5rem;
            background-color: #ddd;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tab-button.active {
            background-color: var(--primary-color);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        #motivation-quote {
            text-align: center;
            font-style: italic;
            margin-bottom: 2rem;
            color: var(--secondary-color);
        }

        .butterfly {
            position: absolute;
            font-size: 20px;
            animation: fly 10s infinite alternate;
        }

        @keyframes fly {
            0% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(50px, -50px) rotate(10deg); }
            50% { transform: translate(100px, 0) rotate(0deg); }
            75% { transform: translate(50px, 50px) rotate(-10deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        @media (max-width: 600px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2em;
            }

            #task-form {
                flex-direction: column;
            }

            #task-input {
                width: 100%;
                margin-bottom: 10px;
                border-radius: 20px;
            }

            #task-form button {
                width: 100%;
                border-radius: 20px;
            }

            #garden {
                height: 300px;
            }

            .task {
                flex-direction: column;
                align-items: flex-start;
            }

            .task-buttons {
                display: flex;
                justify-content: space-between;
                width: 100%;
                margin-top: 10px;
            }

            .task-buttons button {
                flex: 1;
                margin-right: 5px;
            }

            .task-buttons button:last-child {
                margin-right: 0;
            }

            .tab-buttons {
                flex-direction: column;
            }

            .tab-button {
                margin: 0.25rem 0;
                width: 100%;
            }

            #date-selector {
                width: 100%;
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Enchanted Task Garden</h1>
        <div id="motivation-quote"></div>
        <div id="streak"></div>
        <div class="tab-buttons">
            <button class="tab-button active" onclick="showTab('today')">Today's Blooms</button>
            <button class="tab-button" onclick="showTab('past')">Garden History</button>
        </div>
        <div id="today-tab" class="tab-content active">
            <input type="date" id="date-selector">
            <form id="task-form">
                <input type="text" id="task-input" placeholder="Plant a new task...">
                <button type="submit">Grow</button>
            </form>
            <div id="task-list"></div>
            <div id="garden">
                <div class="butterfly">ðŸ¦‹</div>
            </div>
        </div>
        <div id="past-tab" class="tab-content">
            <h2>Your Garden's Journey</h2>
            <div id="past-tasks"></div>
        </div>
    </div>

    <script>
        const taskForm = document.getElementById('task-form');
        const taskInput = document.getElementById('task-input');
        const taskList = document.getElementById('task-list');
        const garden = document.getElementById('garden');
        const dateSelector = document.getElementById('date-selector');
        const streakDisplay = document.getElementById('streak');
        const pastTasks = document.getElementById('past-tasks');
        const motivationQuote = document.getElementById('motivation-quote');

        let tasks = JSON.parse(localStorage.getItem('allTasks')) || {};
        let currentDate = new Date().toISOString().split('T')[0];

        dateSelector.value = currentDate;
        dateSelector.max = currentDate;

        const quotes = [
            "Grow through what you go through.",
            "Bloom where you are planted.",
            "Every accomplishment starts with the decision to try.",
            "The secret of getting ahead is getting started.",
            "Don't wait for opportunity. Create it.",
            "Small steps lead to big changes.",
            "Your garden of success is cultivated one task at a time."
        ];

        function getRandomQuote() {
            return quotes[Math.floor(Math.random() * quotes.length)];
        }

        function saveTasks() {
            localStorage.setItem('allTasks', JSON.stringify(tasks));
        }

        function renderTasks() {
            taskList.innerHTML = '';
            if (!tasks[currentDate]) {
                tasks[currentDate] = [];
            }
            tasks[currentDate].forEach((task, index) => {
                const taskElement = document.createElement('div');
                taskElement.classList.add('task');
                if (task.completed) {
                    taskElement.classList.add('completed');
                }
                taskElement.innerHTML = `
                    <span>${task.description}</span>
                    <div class="task-buttons">
                        <button onclick="toggleTask(${index})">${task.completed ? 'Replant' : 'Bloom'}</button>
                        <button onclick="deleteTask(${index})">Prune</button>
                    </div>
                `;
                taskList.appendChild(taskElement);
            });
            updateGarden();
            updateStreak();
            renderPastTasks();
            motivationQuote.textContent = getRandomQuote();
        }

        function renderPastTasks() {
            pastTasks.innerHTML = '';
            const sortedDates = Object.keys(tasks).sort((a, b) => new Date(b) - new Date(a));
            
            sortedDates.forEach(date => {
                if (date !== currentDate) {
                    const dateElement = document.createElement('div');
                    dateElement.innerHTML = `<h3>${date}</h3>`;
                    const taskList = document.createElement('ul');
                    taskList.style.listStyleType = 'none';
                    taskList.style.padding = '0';
                    
                    tasks[date].forEach(task => {
                        const taskItem = document.createElement('li');
                        taskItem.classList.add('task');
                        if (task.completed) {
                            taskItem.classList.add('completed');
                        }
                        taskItem.innerHTML = `<span>${task.description}</span>`;
                        taskList.appendChild(taskItem);
                    });
                    
                    dateElement.appendChild(taskList);
                    pastTasks.appendChild(dateElement);
                }
            });
        }

        function updateGarden() {
            garden.innerHTML = '<div class="butterfly">ðŸ¦‹</div>';
            const completedTasks = tasks[currentDate].filter(task => task.completed).length;
            for (let i = 0; i < completedTasks; i++) {
                const flower = document.createElement('div');
                flower.classList.add('flower');
                flower.style.left = `${Math.random() * 95}%`;
                flower.style.bottom = `${20 + Math.random() * 50}px`;
                garden.appendChild(flower);
            }
        }

        function addTask(description) {
            if (!tasks[currentDate]) {
                tasks[currentDate] = [];
            }
            tasks[currentDate].push({ description, completed: false });
            saveTasks();
            renderTasks();
        }

        function toggleTask(index) {
            tasks[currentDate][index].completed = !tasks[currentDate][index].completed;
            saveTasks();
            renderTasks();
        }

        function deleteTask(index) {
            tasks[currentDate].splice(index, 1);
            saveTasks();
            renderTasks();
        }

        function updateStreak() {
            let streak = 0;
            let longestStreak = 0;
            let currentStreak = 0;
            let date = new Date(currentDate);

            while (true) {
                const dateString = date.toISOString().split('T')[0];
                if (!tasks[dateString] || tasks[dateString].length === 0 || !tasks[dateString].every(task => task.completed)) {
                    longestStreak = Math.max(longestStreak, currentStreak);
                    currentStreak = 0;
                } else {
                    currentStreak++;
                    if (dateString !== currentDate) {
                        streak++;
                    }
                }
                if (!tasks[dateString] || date <= new Date(Object.keys(tasks)[0])) {
                    break;
                }
                date.setDate(date.getDate() - 1);
            }
            longestStreak = Math.max(longestStreak, currentStreak);

            streakDisplay.textContent = `ðŸŒ± Growing streak: ${streak} days | ðŸ† Longest bloom: ${longestStreak} days`;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            document.getElementById(`${tabName}-tab`).classList.add('active');
            document.querySelector(`.tab-button[onclick="showTab('${tabName}')"]`).classList.add('active');
        }

        taskForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const description = taskInput.value.trim();
            if (description) {
                addTask(description);
                taskInput.value = '';
            }
        });

        dateSelector.addEventListener('change', (e) => {
            currentDate = e.target.value;
            renderTasks();
        });

        renderTasks();
    </script>
</body>
</html>